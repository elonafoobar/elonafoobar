# 更新履歴

重要な変更点は全てこのファイルに記載されています。

このファイルの形式は[Keep a Changelog](http://keepachangelog.com/en/1.0.0/)に則っており、
[Semantic Versioning](http://semver.org/spec/v2.0.0.html)を使用しています。



## [0.2.5] - 2018-06-10

### 追加

- 実験的にLua APIを導入
- カジノでエーテル抗体をもらえる確率を引き上げ
  - omakeと同じ
- ダメージポップアップの処理速度改善
- キー入力の感度改善
- 影の描写を改善
- 画面サイズ、フルスクリーンのオプションを追加
- いくつかのNPCに専用ポートレイトを設定
- `animewait`の設定に基づいてアニメーションの長さを削減
- 生成数をデッキメニューに表示
- 入力画面で入力する文字数を制限
- ダメージポップアップの切り替えオプションを追加(`damage_popup`)
- PCの体重を計算する式を調整

### 削除

- すでに必要なくなった`original\config.txt`はコピーしないように
- マグルモードではミニマップに階段の位置を表示しないように

### 修正

- [本家] Elona不具合修正Wikiにある既知のバグを修正
  - 多すぎるのでまた後で
- [本家] 混沌三神が願いの杖を落とさなかったのを修正
- [本家] とある条件下でシナリオ進行中にPCが死ぬのを修正
- [本家] 神の下僕のようなペットのユニークNPCと会話できないのを修正
- [本家] 壁やドアで埋められたマップに入ると無限ループになるのを修正
- カジノのブラックジャックが辞められないのを修正
- シナリオをオンにしていても再生されないのを修正
- 日本語での名前を省略して表示するアルゴリズムを修正
- Shiftキーとテンキーで走れないのを修正
- テンキー側のEnterキーが効かないのを修正
- Enterキーが時々効かなくなるのを修正
- マグルモードで名声が願えてしまうのを修正
- 生き武器にエンチャントを付与できなかったのを修正
- ウィザードモードでアイテムやスキルが願えなかったのを修正
- boneファイルが日本語で文字化けするのを修正
- PCの名前をより厳格にチェックするように
- デッキを使ったときにクラッシュするのを修正
- キャラメイクの際PCC選択画面から一度戻ると、PCCの画面が飛ばされるのを修正
- 日本語のtypo修正



## [0.2.4] - 2018-05-20

### 修正

- セーブデータがGzip圧縮されていたのを修正
- フィートメニューにおいてフィート/変異/エーテル病に色がついていなかったのを修正



## [0.2.3] - 2018-05-19

### 追加

- ゲーム内からconfig.jsonのオプションの一部を変更できるように
  - Extra種族/職業
  - アニメウェイト/アラートウェイト
  - キーウェイト(初回)/キーウェイト
- 入荷頻度をオプションから変更できるように
  - 0-10まで(日単位。デフォルト3日)。0を選ぶと話しかけるたびに品揃えが変わる

### 修正

- 吟遊詩人の演奏でPCが経験値を得るのを修正
- BOM付きのUTF-8ファイルでも読み込めるよう修正
- ダメージポップアップが多すぎると極端に遅くなるのを修正
  - oomExと同様、同時に出現するポップアップの数に制限を設けた
- ダメージポップアップがマップを切り替えても残り続けるのを修正
- SEが鳴らないことがあるのを修正
- 時々BGMが頭から再生し直されるのを修正
- PC速度が遅くNPCが多いとスタックオーバーフローを起こすのを修正
- ファイル名/フォルダ名として不正な名前のPCを作ろうとすると落ちるのを修正
  - ファイル名/フォルダ名に使える名前に変換される
- 貴重なものでインベントリが埋まっている際にアイテム破壊が起こると無限ループが起こるのを修正
- アイテム破壊が起こると落ちることがあるのを修正
- タイポ修正(日本語)
- ジャーナルを開くと落ちることがあるのを修正
- ジャーナルにやたらと空行が混じっていたのを修正
- 数値入力がESC/Shiftキーでキャンセルできないのを修正
- ボール魔法やボルト魔法などで属性の色が反映されていなかったのを修正
- 能力値ロールにおいて、次へ進んでから戻ってくると残りロックが0になるのを修正
- 依頼掲示板でキーの効きが極端に悪くなるのを修正
- ゲーム内ヘルプが文字化けするのを修正
- PCの店で店主を任命する際、魅力と交渉の欄の表示がおかしくなるのを修正
- 採掘スキルが低いと壁が絶対に掘れないのを修正



## [0.2.2] - 2018-05-05

### 追加

- オートセーブを無効化するように
  - オプションメニューから再度有効にできます
- README.mdを現在の状況に合わせて更新
- 日本語版のREADMEであるREADME-jp.mdを追加

### 修正

- [本家] 洞窟を出ずに死ぬと洞窟から出られなくなるのを修正
- `key_close`のデフォルト値が`key_charainfo`と被る"c"になっていたのを修正
- 以下のクラッシュを修正:
  - 魔法使いの夢を見ると落ちる
  - 呪われていない/祝福された不思議な巻物を読むと落ちる
  - 冒険者から得意なスキルを聞くと落ちる
  - 冒険者からスキルの訓練を受けようとすると落ちる
  - 『リトルシスター』の死体を食べると落ちる
  - トレイナーに話しかけると落ちる
  - 能力獲得の巻物を読むと落ちる
  - 成長の巻物を読むと落ちる



## [0.2.1] - 2018-05-03

### 追加

- エラーログといくつかの情報をruntime/log.txtに出力するように

### 削除

- 本家のカスタムファイル形式への対応を削除
  - これは一時的な措置です。当然再度実装されます

### 修正

- [本家] 引っ越したときに雇用人が消えてしまうのを修正
- [本家] カジノの報酬を生成するのに失敗するとフリーズするのを修正
- 選択したテキストが黒く塗りつぶされているのを修正
- いくつかのライブラリがUnicodeバージョンになっていなかったのを修正
- いくつかのセーブデータが誤ったフォルダに保存されていたのを修正
- セーブフォルダの文字化けを修正
- ダウンロードされたフォルダに日本語が含まれると落ちるのを修正



## [0.2.0] - 2018-05-01

### 追加

- 魚のデータを外部化
  - テスト用に"謎のお魚"を追加
- 採掘モードを実装(oomEx互換)
- バージョニングを導入
- セーブデータにFoobarのバージョンを保存するように
- Wizardモードで祝呪状態を指定できるように
  - 祝福された/呪われていない/呪われた/堕落したをアイテム名の前に置いてください
- 願いの入力の際、[BackSpace]による削除と[Ctrl-V]による貼り付けが使えるように
- ペットのHPバーをomakeのように表示するように
- 紐で繋がれたペットのHPバーの横に紐のアイコンを表示するように
- 実行ファイルが置かれているフォルダを自動検知するように
- 願いの判定方法の向上
- フォントのスタイルをサポート(太字、イタリック体、下線)
- オプションのデフォルト値を定義するように
  - 長いconfig.jsonを用意する必要がなくなる
- ナンバーパッドを試験的にサポート
- ダメージポップアップを試験的に実装
- Autopickを試験的に実装
- デッキを使ったカード収集

### 削除

- 使用できないオプション(`cfg_msg_box`)を削除.
- テスト用のNPCを削除(低レベルにも関わらず強すぎるためテストプレイに支障をきたす)
- 一時的に高品質影描写を無効化
- Voldemortモードをデフォルトで無効化するように
  - [F12]を押すことでvoldemortモードに入ることができる

### 修正

- 体当たりでアインクから果実が落ちるのを修正
- スキルを願うと落ちるのを修正
- アイテムを解呪できないのを修正
- 能力値ロールでFoobarが終了するのを修正
- カジノの描写不具合を修正
- タブ文字が適切に描写されないのを修正
- 窃盗で落ちるのを修正
- 壁から長剣が掘れるのを修正
- シナリオシーンにおいて日本語テキストが中央ぞろえされていないのを修正
- ログウィンドウで日本語テキストの描写が崩れていたのを修正
- 選択カーソルが描写されていなかったのを修正
- ゲーム内からセーブデータが消せなかったのを修正
- タイポ修正(英語)



## [0.1.0] - 2018-04-08

### 追加

- Luaを導入
- データの一部をLuaスクリプトに外部化
- テキストの一部をLuaスクリプトに外部化
- 国際化
- 設定ファイルにJSONを使用
- カスタム種族
- カスタム職業
- カスタムNPC
- ウィザードモードで願うアイテムの個数を指定可能に
- 周りにドアが一つしかないとき閉じる方向を尋ねないように
- 自動採掘(autodig)
- 昇り階段/降り階段の位置をハイライト
- 常にHPバーを表示する
- Shiftキーを押しながらキャラクターと入れ替わる
- クイックセーブ&ロード
- NPCの行動の数の上限を撤廃(10 -> 無制限)
- キャラメイク時に最低値ロール

### 削除

- F12のコンソールコマンドを削除
- 古いバージョン(1.16よりも前)との互換性を放棄

### 修正

多すぎるのでまた後で
